<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input Design Prototype</title>
    <style>
        :root {
            --primary: #2962FF;
            --surface: #FFFFFF;
            --background: #F8F9FA;
            --border: #E0E0E0;
            --text-main: #1A1A1A;
            --text-secondary: #757575;
            --danger: #F23645;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .phone-frame {
            width: 375px;
            height: 667px;
            background: var(--background);
            border-radius: 32px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 8px solid #333;
        }

        .chat-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 14px;
            line-height: 1.4;
        }

        .message.assistant {
            align-self: flex-start;
            background: white;
            border-bottom-left-radius: 4px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .message.user {
            align-self: flex-end;
            background: var(--primary);
            color: white;
            border-bottom-right-radius: 4px;
        }

        /* --- New Input Bar Design --- */
        .input-bar-container {
            background: var(--surface);
            border-top: 1px solid var(--border);
            padding: 12px 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        /* Top Row: Context/Mode Info (Optional, kept minimal) */
        .input-status {
            font-size: 12px;
            color: var(--text-secondary);
            text-align: center;
            height: 0; /* Hidden by default */
            overflow: hidden;
            transition: height 0.2s;
        }
        .input-status.active {
            height: 20px;
        }

        /* Main Input Row */
        .input-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Mode Switcher */
        .mode-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: var(--background);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
            flex-shrink: 0;
        }
        .mode-btn:hover {
            background: #eef2ff;
            color: var(--primary);
            border-color: var(--primary);
        }

        /* Input Wrapper */
        .input-wrapper {
            flex: 1;
            position: relative;
            height: 44px;
            display: flex;
            align-items: center;
        }

        /* Text Input */
        .text-input {
            width: 100%;
            height: 100%;
            border: 1px solid var(--border);
            border-radius: 22px;
            padding: 0 16px;
            font-size: 15px;
            outline: none;
            transition: border-color 0.2s;
            background: var(--background);
        }
        .text-input:focus {
            border-color: var(--primary);
            background: white;
        }

        /* Voice Button (Replaces Text Input) */
        .voice-btn {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 22px;
            background: var(--primary);
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(41, 98, 255, 0.2);
            user-select: none;
        }
        .voice-btn:active {
            transform: scale(0.98);
            background: #1976D2;
        }
        .voice-btn.recording {
            background: var(--danger);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(242, 54, 69, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(242, 54, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(242, 54, 69, 0); }
        }

        /* Send Button */
        .send-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
            transition: transform 0.2s, opacity 0.2s;
        }
        .send-btn:disabled {
            background: var(--border);
            cursor: not-allowed;
            opacity: 0.7;
        }
        .send-btn svg {
            margin-left: 2px; /* Visual balance */
        }

        /* --- Preview Area (For Voice Result) --- */
        .voice-preview-container {
            position: absolute;
            bottom: 70px; /* Above input bar */
            left: 16px;
            right: 16px;
            background: white;
            padding: 12px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: none; /* Hidden by default */
            animation: slideUp 0.2s ease-out;
            z-index: 10;
        }
        .voice-preview-container.visible {
            display: block;
        }
        .preview-text {
            font-size: 14px;
            color: var(--text-main);
            margin-bottom: 8px;
            max-height: 100px;
            overflow-y: auto;
        }
        .preview-actions {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }
        .action-btn {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid var(--border);
            background: white;
            color: var(--text-secondary);
            cursor: pointer;
        }
        .action-btn.send {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Icons */
        .icon { width: 20px; height: 20px; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }

    </style>
</head>
<body>

    <div class="phone-frame">
        <div class="chat-area">
            <div class="message assistant">Hello! Try switching input modes below.</div>
        </div>

        <!-- Voice Preview Popup -->
        <div class="voice-preview-container" id="previewPopup">
            <div class="preview-text" id="previewText">Recognized text will appear here...</div>
            <div class="preview-actions">
                <button class="action-btn" onclick="clearPreview()">Cancel</button>
                <button class="action-btn send" onclick="sendPreview()">Send</button>
            </div>
        </div>

        <div class="input-bar-container">
            <div class="input-row">
                <!-- Mode Switcher -->
                <button class="mode-btn" id="modeSwitchBtn" onclick="toggleMode()">
                    <!-- Default shows Mic icon (to switch to voice) or Keyboard (to switch to text) -->
                    <svg class="icon" id="modeIcon" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>
                </button>

                <!-- Input Wrapper -->
                <div class="input-wrapper" id="inputWrapper">
                    <!-- Text Input (Default) -->
                    <input type="text" class="text-input" placeholder="Type a message..." id="textInput">
                    
                    <!-- Voice Button (Hidden by default) -->
                    <button class="voice-btn" id="voiceBtn" style="display: none;">
                        <svg class="icon" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>
                        Hold to Speak
                    </button>
                </div>

                <!-- Send Button -->
                <button class="send-btn" id="sendBtn">
                    <svg class="icon" viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        let isVoiceMode = false;
        let isRecording = false;

        const modeBtn = document.getElementById('modeSwitchBtn');
        const modeIcon = document.getElementById('modeIcon');
        const textInput = document.getElementById('textInput');
        const voiceBtn = document.getElementById('voiceBtn');
        const previewPopup = document.getElementById('previewPopup');
        const previewText = document.getElementById('previewText');

        function toggleMode() {
            isVoiceMode = !isVoiceMode;
            if (isVoiceMode) {
                // Switch to Voice Mode
                // Icon changes to Keyboard (to switch back)
                modeIcon.innerHTML = '<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>'; // Actually this is lock, let's use keyboard path
                modeIcon.innerHTML = '<rect x="2" y="4" width="20" height="16" rx="2" ry="2"></rect><line x1="6" y1="8" x2="6" y2="8"></line><line x1="10" y1="8" x2="10" y2="8"></line><line x1="14" y1="8" x2="14" y2="8"></line><line x1="18" y1="8" x2="18" y2="8"></line><line x1="6" y1="12" x2="6" y2="12"></line><line x1="10" y1="12" x2="10" y2="12"></line><line x1="14" y1="12" x2="14" y2="12"></line><line x1="18" y1="12" x2="18" y2="12"></line><line x1="6" y1="16" x2="18" y2="16"></line>';
                
                textInput.style.display = 'none';
                voiceBtn.style.display = 'flex';
            } else {
                // Switch to Text Mode
                // Icon changes to Mic
                modeIcon.innerHTML = '<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>';
                
                textInput.style.display = 'block';
                voiceBtn.style.display = 'none';
                previewPopup.classList.remove('visible');
            }
        }

        // Simulate Hold to Speak
        voiceBtn.addEventListener('mousedown', startRecord);
        voiceBtn.addEventListener('mouseup', stopRecord);
        voiceBtn.addEventListener('touchstart', startRecord);
        voiceBtn.addEventListener('touchend', stopRecord);

        function startRecord(e) {
            e.preventDefault();
            isRecording = true;
            voiceBtn.classList.add('recording');
            voiceBtn.innerText = "Release to Send";
            previewPopup.classList.add('visible');
            previewText.innerText = "Listening...";
        }

        function stopRecord(e) {
            e.preventDefault();
            if(!isRecording) return;
            isRecording = false;
            voiceBtn.classList.remove('recording');
            voiceBtn.innerHTML = '<svg class="icon" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg> Hold to Speak';
            
            // Simulate result
            previewText.innerText = "Bitcoin looks bullish today based on the daily timeframe.";
        }

        function clearPreview() {
            previewPopup.classList.remove('visible');
            previewText.innerText = "";
        }

        function sendPreview() {
            // Simulate send
            const msg = document.createElement('div');
            msg.className = 'message user';
            msg.innerText = previewText.innerText;
            document.querySelector('.chat-area').appendChild(msg);
            clearPreview();
        }
    </script>
</body>
</html>